CREATE TABLE ISSUESLISTS (
    ID SERIAL PRIMARY KEY,
    NAME VARCHAR(100) NOT NULL UNIQUE
);

CREATE TABLE ISSUES (
    ID SERIAL PRIMARY KEY,
    ISSUESLIST_ID INTEGER NOT NULL,
    SUMMARY VARCHAR(255) NOT NULL,
    DESCRIPTION TEXT,
    USER_ID_ASSIGNEDTO INTEGER,
    CONSTRAINT FK_ISSUESLIST
        FOREIGN KEY (ISSUESLIST_ID)
        REFERENCES ISSUESLISTS(ID)
    CONSTRAINT FK_USER_ASSIGNED
        FOREIGN KEY (USER_ID_ASSIGNEDTO)
        REFERENCES USERS(ID)
);

INSERT INTO ISSUESLISTS (NAME) VALUES ('ToDo');
INSERT INTO ISSUESLISTS (NAME) VALUES ('In progress');
INSERT INTO ISSUESLISTS (NAME) VALUES ('Done');

-- ToDo
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (1, 'Create login form', 'Design and implement login form', 1);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (1, 'Add registration endpoint', 'REST endpoint for user registration', 2);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (1, 'Prepare database schema', 'Initial database structure', 3);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (1, 'Configure Docker', 'Dockerize the application', 4);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (1, 'Write unit tests', 'JUnit tests for service layer', 5);

-- In progress
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (2, 'Implement security', 'Spring Security configuration', 6);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (2, 'Fix login bug', 'Session not persisting correctly', 1);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (2, 'Optimize queries', 'Improve DB performance', 2);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (2, 'Refactor controller', 'Cleanup REST controllers', 3);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (2, 'Add logging', 'Implement logging system', 4);

-- Done
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (3, 'Project setup', 'Initialize Spring Boot project', 5);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (3, 'Create USERS table', 'User table with basic fields', 6);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (3, 'Configure MySQL', 'Local database setup', 1);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (3, 'Connect DBeaver', 'Database client configured', 2);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO) VALUES (3, 'Basic CRUD working', 'CRUD operations tested', 3);
